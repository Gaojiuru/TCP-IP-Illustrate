# TCP-IP-Illustrate
#Reading notes for TCP/IP Illustrate
#Chapter 1

1.1 体系结构原则

  TDM: Time-Division Multiplexing 时分多路复用，是一种数字或者模拟（较罕见）的多路复用技术。使用这种技术，两个以上的信号或数据流可以同时在一条通信线路上传输，其表现为同一通信信道的子信道。但在物理上来看，信号还是轮流占用物理信道的。时间域被分成周期循环的一些小段，每段时间长度是固定的，每个时段用来传输一个子信道。例如子信道1的采样，可能是字节或者是数据块，使用时间段1，子信道2使用时间段2，等等。一个TDM的帧包含了一个子信道的一个时间段，当最后一个子信道传输完毕，这样的过程将会再重复来传输新的帧，也就是下个信号片段。

  端到端论点：只有在通信系统端角度的应用知识的帮助下，才能完全和正确地实现问题中提到的功能。因此，作为通信自身的一个特点，不可能提供有疑问的功能。（有时，通信系统提供的一个功能不完整的版本可能用于提高性能。）
  
   ![image](http://github.com/Gaojiuru/TCP-IP-Illustrate/raw/master/images/picture1.jpg)
  
  它认为只有涉及通信系统的应用程序或最终用户，其正确性和完整性才可能得到实现。即使为正确实现应用程序做了努力，其功能可能注定不会很完善。
这个原则认为重要的功能（如差错控制、加密、交付确认）通常不会在大型系统的低层实现。但是低层可以提供方便系统工作的功能，并最终可能改善性能。这种观点表明低层功能不应以完美为目标，因为对应用程序需求做出完美推测是不可能的。

  端到端论点倾向于支持一种使用“哑”网络和连接到网络的“智能”系统的设计方案。这是我们在TCP/IP设计中所看到的，很多功能（例如，保证数据不丢失、发送方控制发送速率）在端主机的应用程序中实现。选择哪些功能在同一计算机、网络或软件栈中实现，这是另一个称为命运共享的相关原则。

  命运共享建议将所有必要的状态放在通信端点，这些状态用于维护一个活动的通信关联（例如虚拟连接）。由于这个原因，导致通信失效的情况也会导致一个或更多端点失效，这样显然会导致整个通信的失败。命运共享是一种通过虚拟连接（例如，由TCP实现）维持活动的设计理念，即便网络连接在一段时间内失效。命运共享也支持一种“带智能终端主机的哑网络”模型，当前Internet中的矛盾是：哪些功能在网络中实现，哪些功能不在网络中实现。

1.2 设计和实现

  ISO定义的标准7层OSI模型
 
 ![image](http://github.com/Gaojiuru/TCP-IP-Illustrate/raw/master/images/OSI模型.jpg)

  分层体系结构的一个主要优点是具有协议复用的能力。这种复用形式允许多种协议共存于同一基础设施中。它也允许相同协议对象（例如连接）的多个实例同时存在，并且不会被混淆。当某层的一个称为协议数据单元（PDU）的对象（分组、消息等）被低层携带时，这个过程称为在相邻低层的封装（作为不透明的数据）。因此，第N层的多个对象可以通过第N-1层的封装而复用。

![image](http://github.com/Gaojiuru/TCP-IP-Illustrate/raw/master/images/封装.png)

  封装通常与分层一起使用。单纯的封装涉及获得某层的PDU，并在低层将它作为不透明（无需解释）的数据来处理。封装发生在发送方，拆封（还原操作）发生在接收方。多数协议在封装过程中使用头部，少数协议也使用尾部。
  
  有些理想化的小型互联网络包括两种端系统，即交换机和路由器。如下图所示，每个编号对应于在特定层中的一种协议。
  
  ![image](http://github.com/Gaojiuru/TCP-IP-Illustrate/raw/master/images/picture2.png)
  
  不同的网络设备实现协议栈的不同子集，端主机通常实现所有层。路由器实现传输层之下的各层。这种理想化的结构经常被破坏，这是由于路由器和交换机通常包括类似于主机的功能（例如管理和建立），因此它们需要实现所有层，即使有些层很少使用。

1.3 TCP/IP协议族结构和协议

ARPANET参考模型

![image](http://github.com/Gaojiuru/TCP-IP-Illustrate/raw/master/images/ARPANET参考模型.png)
  
  每个IP分组都是一个数据块，所以都包含发送方和接收方的第3层地址，这些地址被称为IP地址，即32位的IPv4或128位的IPv6地址。每个数据报的目的地址用于决定将该数据报发送到哪里，而做出此决定和发送数据报到下一跳的过程称为转发。地址类型决定如何进行转发：单播（目的地是一台主机）、广播（目的地是一个指定网络中的所有主机）和组播（目的地是属于一个组播中的一组主机）。
  
  Internet控制消息协议（ICMP）是IP的一个辅助协议，IP层使用它与其它主机或路由器的IP层之间交换差错消息和其它重要消息。
  Intenrnet组管理协议（IGMP）是IPv4的另一个辅助协议。采用组播寻址和交付来管理作为组播组成员的主机（一组接收方接收一个特定目的地址的组播流量）。
  数据拥塞控制协议（DCCP），提供了一种介于TCP和UDP之间的服务类型：面向连接、不可靠的数据报交换，但具有拥塞控制功能。
  流控制传输协议（SCTP）是用于某些特定系统的传输协议。SCTP提供类似于TCP的可靠交付，但不要求严格保持数据的顺序。它还允许多个数据流逻辑上在同一连接上传输，并提供了一个消息抽象。SCTP用于在IP网络上携带信令消息，类似于某些电话网络中的用途。
  
  下图模拟了如何在一台主机上进行分解
  
  ![image](http://github.com/Gaojiuru/TCP-IP-Illustrate/raw/master/images/picture3.png)
  
  熟知端口号：安全外壳协议（SSH，端口22）、FTP（端口20和21）、Telnet远程终端协议（端口23）、电子邮件/简单邮件传输协议（SMTP，端口25）、域名系统（DNS，端口53）、超文本传输协议或Web（HTTP和HTTPS，端口80和443）、交互式邮件访问协议（IMAP和IMAPS，端口143和993）、简单网络管理协议（SNMP，端口161和162）、轻量级目录访问协议（LDAP，端口389）
  
  DNS是一个分布式数据库，提供主机名和IP地址之间的映射（反之亦然），它是一个应用层协议，因此它的运行依赖于其它协议。
  
  internet表示使用常见协议族互联的多个网络；Internet表示可使用TCP/IP通信的世界范围的主机集合。
  
  1.5设计应用
  
  客户机/服务器：大多数网络被设计为端是客户机，而另一端是服务器。服务器可分为两类：迭代合并发。
  迭代：
  Step 1：等待客户机请求到达
  Step 2：处理客户机请求
  Step 3：将响应发送给请求的客户机
  Step 4：回到Step 1
  迭代服务器的问题是Step 2需要经过较长的时间。在此期间无法为其它客户机服务
  并发：
  Step 1：等待客户机请求到达
  Step 2：启用一个新服务器实例来处理客户机请求，当请求的任务完成后，新服务器终止。同时，原有服务器实例继续Step 3
  Step 3：回到Step 1
 
  
  
  
  
  
